<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>IMDb File Viewer</title>
  <style>
    body { background: #000; color: #fff; font-family: sans-serif; margin: 0; padding: 20px; }
    input { margin-bottom: 15px; padding: 10px; width: 100%; font-size: 1rem; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 10px; }
    .item { background: #111; padding: 10px; border-radius: 6px; text-align: center; cursor: pointer; }
    .item:hover { background: #222; }
    .item img { width: 100%; border-radius: 4px; margin-bottom: 8px; }
    .overlay {
      position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.9); display: none; justify-content: center; align-items: center;
      z-index: 9999; flex-direction: column;
    }
    .overlay iframe {
      width: 90vw; height: 80vh; border: none; border-radius: 10px;
    }
    .close-btn {
      margin: 10px; padding: 10px 20px; background: #f00; color: white;
      border: none; border-radius: 5px; cursor: pointer; font-size: 1rem;
    }
    #loadMore {
      margin-top: 30px; padding: 12px 24px; font-size: 1rem;
      background: #333; color: white; border: none; border-radius: 6px; cursor: pointer;
    }
    #loadMore:hover { background: #444; }
  </style>
</head>
<body>
  <h1>ðŸŽ¬ IMDb Titles with Thumbnails</h1>
  <input type="text" id="search" placeholder="Search titles...">
  <div class="grid" id="grid"></div>
  <button id="loadMore" onclick="loadBatch()">Generate More</button>

  <div class="overlay" id="overlay">
    <button class="close-btn" onclick="closeOverlay()">Close</button>
    <iframe id="player" allowfullscreen></iframe>
  </div>

  <!-- Your IMDb ID list -->
  <script src="id.js"></script>

  <script>
    const apiKey = '3a73619bbb8fc6d47742d1b5b2b707b5';
    let index = 0;
    const batchSize = 50;
    const grid = document.getElementById("grid");
    const player = document.getElementById("player");
    const overlay = document.getElementById("overlay");
    const searchInput = document.getElementById("search");
    const loadMoreBtn = document.getElementById("loadMore");
    const allItems = [];

    function openOverlay(id) {
      player.src = `https://vidsrc.xyz/embed/movie/${id}`;
      overlay.style.display = "flex";
    }

    function closeOverlay() {
      overlay.style.display = "none";
      player.src = "";
    }

    async function fetchMovieData(id) {
      try {
        const res = await fetch(`https://www.omdbapi.com/?apikey=${apiKey}&i=${id}`);
        const data = await res.json();
        return {
          title: data.Title || id,
          poster: data.Poster && data.Poster !== "N/A" ? data.Poster : "https://via.placeholder.com/150x220?text=No+Image"
        };
      } catch {
        return { title: id, poster: "https://via.placeholder.com/150x220?text=Error" };
      }
    }

    async function loadBatch() {
      let added = 0;
      while (added < batchSize && index < imdbIds.length) {
        const id = imdbIds[index];
        const { title, poster } = await fetchMovieData(id);
        const div = document.createElement("div");
        div.className = "item";
        div.dataset.title = title.toLowerCase();
        div.innerHTML = `<img src="${poster}" alt="${title}"><div>${title}</div>`;
        div.onclick = () => openOverlay(id);
        grid.appendChild(div);
        allItems.push(div);
        index++;
        added++;
      }
      if (index >= imdbIds.length) {
        loadMoreBtn.disabled = true;
        loadMoreBtn.textContent = "All Loaded";
      }
    }

    searchInput.addEventListener("input", () => {
      const query = searchInput.value.toLowerCase();
      allItems.forEach(item => {
        item.style.display = item.dataset.title.includes(query) ? "block" : "none";
      });
    });

    loadBatch();
  </script>
</body>
</html>
